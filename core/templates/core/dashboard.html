{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}Dashboard - NeuroZen{% endblock %}

{% block content %}
<h2 class="mb-5 text-center">Welcome back, {{ user.username }} ðŸ‘‹</h2>

<div class="container-fluid px-4 h-100 d-flex flex-column">
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 flex-grow-1">
    <!-- Pomodoro Timer -->
    <div class="col d-flex">
      <div class="card flex-fill h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Pomodoro Timer</h5>
          <p class="card-text text-muted">Stay focused using your {{ user.focus_time }} min timer.</p>
          <a href="#" class="btn btn-primary btn-sm">Start Timer</a>
        </div>
      </div>
    </div>

    <!-- Today's Tasks -->
    <div class="col d-flex">
      <div class="card flex-fill h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Today's Tasks</h5>
          <p class="card-text text-muted">You have {{ tasks|length }} task{{ tasks|length|pluralize }} due today.</p>
          <a href="#" class="btn btn-outline btn-sm">View Tasks</a>
        </div>
      </div>
    </div>

    <!-- Daily Quote -->
    <div class="col d-flex">
      <div class="card flex-fill h-100">
        <div class="card-body text-center">
          {% if quote %}
            <blockquote class="blockquote">
              <p class="mb-2">"{{ quote.quote }}"</p>
              <footer class="blockquote-footer">{{ quote.author }}</footer>
            </blockquote>
          {% else %}
            <p class="text-muted">No quote available today.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Breathing Exercise -->
    <div class="col d-flex">
      <div class="card flex-fill h-100 text-center">
        <div class="card-body">
          <h5 class="card-title">Breathing Exercise</h5>
          {% if breathing_exercise %}
            <h6>{{ breathing_exercise.title }}</h6>
            <p class="text-muted">{{ breathing_exercise.description|truncatechars:100 }}</p>
            <p>
              <strong>Inhale:</strong> {{ breathing_exercise.inhale_duration }}s |
              <strong>Hold:</strong> {{ breathing_exercise.hold_duration }}s |
              <strong>Exhale:</strong> {{ breathing_exercise.exhale_duration }}s
            </p>
            <a href="#" class="btn btn-outline btn-sm">Start Exercise</a>
          {% else %}
            <p class="text-muted">No active breathing exercises found.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Journal -->
    <div class="col d-flex">
      <div class="card flex-fill h-100">
        <div class="card-body">
          <h5 class="card-title">Today's Journal</h5>
          {% if mood_entry %}
            <p><strong>Mood:</strong> {{ mood_entry.get_mood_display }}</p>
            <p><strong>Water intake:</strong> {{ mood_entry.water_intake }} cups</p>
            <p><strong>Exercised:</strong> {{ mood_entry.exercised|yesno:"Yes,No" }}</p>
            <p><strong>Diet:</strong> {{ mood_entry.diet_summary|default:"No entry" }}</p>
            <p><strong>Notes:</strong> {{ mood_entry.notes|truncatechars:100 }}</p>
          {% else %}
            <p class="text-muted">No journal entry yet for today.</p>
          {% endif %}
          <div class="text-end mt-2">
            <a href="#" class="btn btn-sm btn-outline-primary">Edit Journal</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Progress -->
    <div class="col d-flex">
      <div class="card flex-fill h-100 text-center">
        <div class="card-body">
          <h5 class="card-title">Your Progress</h5>
          <p class="text-muted mb-1">All Tasks: {{ all_tasks_count }}</p>
          <p class="text-muted mb-1">Completed Tasks: {{ completed_tasks_count }}</p>
          <p class="text-muted mb-1">Pending Tasks: {{ pending_tasks_count }}</p>
          <p class="text-muted mb-1">Pomodoros Today: {{ pomodoro_sessions }}</p>
          <p class="text-muted">Streak: {{ streak_days }} day{{ streak_days|pluralize }}</p>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}






